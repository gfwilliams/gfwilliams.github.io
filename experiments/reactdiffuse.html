<html>
 <head>
 </head>
 <body>
<canvas id="canvas" style="width:100%;height:100%"></canvas>
<script>
var width = 64;
var height = 64;

var canvas = document.getElementById("canvas");
canvas.width = width;
canvas.height = height;
var ctx = canvas.getContext('2d');
var img = ctx.createImageData(width, height);
var s = [], t = [];
var s2 = [], t2 = [];
for (var y=0;y<height;y++) {
  s[y] = new Float32Array(width);
  t[y] = new Float32Array(width);
  s2[y] = new Float32Array(width);
  t2[y] = new Float32Array(width);
}
var d = 0;
for (var y=0;y<height;y++) {
  for (var x=0;x<width;x++) {
    s[y][x] = Math.random();
    t[y][x] = Math.random();
    img.data[d+3] = 255;
    d+=4;
  }
}

 var Ds = 1;
 var Dt = 0.5;
 var f = 0.055;
 var k = 0.062;
 var tm = 0.01;

function step() {
 for (var y=1;y<height-1;y++) {
    for (var x=1;x<width-1;x++) {
      var as = (s[y-1][x] + s[y+1][x] + s[y][x-1] + s[y][x+1]) / 4;
      var at = (t[y-1][x] + t[y+1][x] + t[y][x-1] + t[y][x+1]) / 4;
      s2[y][x] = s[y][x] + (Ds*(as-s[y][x]) - s[y][x]*t[y][x]*t[y][x] + f*(1-s[y][x])) * tm;
      t2[y][x] = t[y][x] + (Dt*(at-t[y][x]) + s[y][x]*t[y][x]*t[y][x] - (k+f)*t[y][x]) * tm;
    }
  }  
}

function animate() {
  requestAnimationFrame( animate );
  
  step();
  var tt;
  tt = t; t = t2; t2 = tt;
  tt = s; s = s2; s2 = tt;
  
  var d = 0;
  for (var y=0;y<height;y++) {
    for (var x=0;x<width;x++) {
      img.data[d] = s[y][x]*255;
      img.data[d+1] = t[y][x]*255;
      d+=4;
    }
  }   
  
  ctx.putImageData(img, 0, 0);
}
animate();
</script>
 </body>
</html>
